<div id="student-progress-wrapper">
  <h4>Students Progress</h4>
  <br>
  <form id="studentSearchForm">
    <input type="text" placeholder="Student ID" name="studentID">
    <button type="submit">Search</button>
  </form>
  <br>
  <br>

  <div id="studentData">

    <div class="container" id="student-progress-attendence-wrapper">
      <div class="row">
        <div class="col-sm-3">
          <div class="card" style="width: 13rem;">
            <img
              src="data:image/png;base64,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"
              class="card-img-top" alt="...">
            <div class="card-body" style="text-align:center">
              <h5 class="card-title" id="studentName">kakashi hatake</h5>
              <h5 class="card-title" id="studentClass">Class : 10</h5>
            </div>
          </div>
        </div>
        <div class="col-sm-9">

          <div class="container">
            <form id="attendenceYearForm">
              <h5>Attendance (yearwise)</h5>
              <input type="number" value="2022" name="attendenceYear">
              <button type="submit">Submit</button>
            </form>
          </div>

          <div>
            <div id="myChart" style="height:300px"></div>
          </div>

        </div>
      </div>
    </div>



    <hr>


    {{!-- ----------------------------- --}}

    <div class="container" id="student-progress-data">

      <h5>PRACTICAL PROGRESS</h5>
      <br>

      <table class="table table-light table-hover table-striped" id="progressTable">
        <thead>
          <tr>
            <th scope="col">SUBJECT</th>
            <th scope="col">Pract-1</th>
            <th scope="col">Pract-2</th>
            <th scope="col">Pract-3</th>
            <th scope="col">Pract-4</th>
            <th scope="col">Pract-5</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row">PHYSICS</th>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>

          <tr>
            <th scope="row">CHEMISTRY</th>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>

          <tr>
            <th scope="row">BIOLOGY</th>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>

          <tr>
            <th scope="row">C++</th>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>

          <tr>
            <th scope="row">HTML</th>
            <td id="pract1"></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>

        </tbody>
      </table>


    </div>





  </div>
</div>


{{!-- This script updates the student Attendance --}}
<script>

    var studentData

    var form1 = document.getElementById("attendenceYearForm")
    var year = 0;
    form1.addEventListener('submit',(e) => {
        e.preventDefault()

        var formData1 = new FormData(form1)
        year = Object.fromEntries(formData1).attendenceYear

        console.log(studentData.attendance)

     

        var studentAttendance = studentData.attendance

        const resultArray = [];
        studentAttendance.forEach(date => {
          resultArray.push([date, 1]);
        })

        console.log(resultArray)

   
    ZC.LICENSE = ["569d52cefae586f634c54f86dc99e6a9", "b55b025e438fa8a98e32482b5f768ff5"]; // DEFINE DATA
    // -----------------------------
    let optionValues = resultArray;
    
    // CHART CONFIG
    // -----------------------------
    let chartConfig = {
      type: 'calendar',
      options: {
        values: optionValues,
        endMonth: 12,
        month: {
          item: {
            fontColor: 'gray',
            fontSize: '9px',
          },
        },
        palette: ['none', '#4CAF50'],
        startMonth: 1,
        weekday: {
          values: ['S', 'M', 'T', 'W', 'T', 'F', 'S'],
          item: {
            fontColor: 'gray',
            fontSize: '9px',
          },
        },
        year: {
          text: year,
          visible: true,
        },
      },
    
      plotarea: {
        marginTop: '15%',
        marginRight: '8%',
        marginBottom: '55%',
        marginLeft: '8%',
      },
      
    };

    // RENDER CHARTS
    // -----------------------------
    zingchart.loadModules('calendar', () => {
      zingchart.render({
        id: 'myChart',
        data: chartConfig,
      });
    });
    })



// =====================================
// This script updates the student Data
// ======================================

  const form = document.getElementById("studentSearchForm")
  form.addEventListener('submit', (e) => {
    e.preventDefault();

    var formData = new FormData(form)
    var formDataJson = Object.fromEntries(formData)
 
    var studentID = formDataJson.studentID

    if(studentID != ""){
        document.getElementById("studentData").style.display = "block"
    }else{
        alert("Invalid Student ID")
        return
    }

    fetch('/users/getStudent' + studentID)
    .then((response) => response.json())
    .then((data) => {
      
      studentData = data[0]
      // To Update Student Name and Class 
      document.getElementById("studentName").innerHTML = data[0].name
      document.getElementById("studentClass").innerHTML = "Class : " + data[0].class

       // To Update HTML Score
      var x = document.getElementById("progressTable").rows[5].cells;
      x[1].innerHTML = data[0].htmlScore.pract1.score + "<br>" + data[0].htmlScore.pract1.timeStamp;
      x[2].innerHTML = data[0].htmlScore.pract2.score + "<br>" + data[0].htmlScore.pract2.timeStamp;
      x[3].innerHTML = data[0].htmlScore.pract3.score + "<br>" + data[0].htmlScore.pract3.timeStamp;
      x[4].innerHTML = data[0].htmlScore.pract4.score + "<br>" + data[0].htmlScore.pract4.timeStamp;
      x[5].innerHTML = data[0].htmlScore.pract5.score + "<br>" + data[0].htmlScore.pract5.timeStamp;

      // To Update PHYSICS Score
      var x = document.getElementById("progressTable").rows[1].cells;
      x[1].innerHTML = data[0].physicsScore.pract1.score + "<br>" + data[0].physicsScore.pract1.timeStamp;
      x[2].innerHTML = data[0].physicsScore.pract2.score + "<br>" + data[0].physicsScore.pract2.timeStamp;
      x[3].innerHTML = data[0].physicsScore.pract3.score + "<br>" + data[0].physicsScore.pract3.timeStamp;
      x[4].innerHTML = data[0].physicsScore.pract4.score + "<br>" + data[0].physicsScore.pract4.timeStamp;
      x[5].innerHTML = data[0].physicsScore.pract5.score + "<br>" + data[0].physicsScore.pract5.timeStamp;
      
      // To Update BIOLOGY Score
      var x = document.getElementById("progressTable").rows[3].cells;
      x[1].innerHTML = data[0].biologyScore.pract1.score + "<br>" + data[0].biologyScore.pract1.timeStamp;
      x[2].innerHTML = data[0].biologyScore.pract2.score + "<br>" + data[0].biologyScore.pract2.timeStamp;
      x[3].innerHTML = data[0].biologyScore.pract3.score + "<br>" + data[0].biologyScore.pract3.timeStamp;
      x[4].innerHTML = data[0].biologyScore.pract4.score + "<br>" + data[0].biologyScore.pract4.timeStamp;
      x[5].innerHTML = data[0].biologyScore.pract5.score + "<br>" + data[0].biologyScore.pract5.timeStamp;
      
      // To Update CPP Score
      var x = document.getElementById("progressTable").rows[4].cells;
      x[1].innerHTML = data[0].cppScore.pract1.score + "<br>" + data[0].cppScore.pract1.timeStamp;
      x[2].innerHTML = data[0].cppScore.pract2.score + "<br>" + data[0].cppScore.pract2.timeStamp;
      x[3].innerHTML = data[0].cppScore.pract3.score + "<br>" + data[0].cppScore.pract3.timeStamp;
      x[4].innerHTML = data[0].cppScore.pract4.score + "<br>" + data[0].cppScore.pract4.timeStamp;
      x[5].innerHTML = data[0].cppScore.pract5.score + "<br>" + data[0].cppScore.pract5.timeStamp;

       // To Update CHEMISTRY Score
      var x = document.getElementById("progressTable").rows[2].cells;
      x[1].innerHTML = data[0].chemistryScore.pract1.score + "<br>" + data[0].chemistryScore.pract1.timeStamp;
      x[2].innerHTML = data[0].chemistryScore.pract2.score + "<br>" + data[0].chemistryScore.pract2.timeStamp;
      x[3].innerHTML = data[0].chemistryScore.pract3.score + "<br>" + data[0].chemistryScore.pract3.timeStamp;
      x[4].innerHTML = data[0].chemistryScore.pract4.score + "<br>" + data[0].chemistryScore.pract4.timeStamp;
      x[5].innerHTML = data[0].chemistryScore.pract5.score + "<br>" + data[0].chemistryScore.pract5.timeStamp;

    })
  })

</script>
